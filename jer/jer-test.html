<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src='jer.js'></script>
	<script src='jer.es6.js'></script>
	<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
	<div id="div1" data-JS='test'></div>
	<span id="span1"></span>
	<div class="cl1">111</div>
	<div class="cl1">2222</div>
	<div class="cl1">3333</div>
	
	<button id="btn1">click</button>

</body>
<script>
/*
callbacks
callbacks.add()        ：回调列表中添加一个回调或回调的集合。
callbacks.disable()    ：禁用回调列表中的回调。
callbacks.disabled()   ：确定回调列表是否已被禁用。 
callbacks.empty()      ：从列表中删除所有的回调。
callbacks.fire()       ：用给定的参数调用所有的回调。
callbacks.fired()      ：访问给定的上下文和参数列表中的所有回调。 
callbacks.fireWith()   ：访问给定的上下文和参数列表中的所有回调。
callbacks.has()        ：确定列表中是否提供一个回调。
callbacks.lock()       ：锁定当前状态的回调列表。
callbacks.locked()     ：确定回调列表是否已被锁定。
callbacks.remove()     ：从回调列表中的删除一个回调或回调集合。
*/
var filterResolve = function() {

  var defer = $.Deferred();

  //先执行成功
  defer.resolve(5);

  //后添加
  defer.done(function(value) {
    $('body').append("<li>defer.done的值是：" + value + "</li>");
  })

  //实现一个管道方法
  var filtered = defer.then(function(value) {
    return value * 2;
  });

  //接受上一个值，叠加处理
  filtered.done(function(value) {
    $('body').append("<li>filtered.done ( 2*5 = ) 10: "+value + "</li>");
  });

};

$("button").on("click", filterResolve);
  

j.fn.req({
	url: '/a.json',
	query: {},
	// async: 'async',
	// type: 'POST',
	// beforeSend: function(){},
	// dataFilter: function(){},
	// complete: function(){},
	// defer 的 done 回调
	// ... 待完成 clk 无论成功与否都执行
	clk: function(res){
		console.log('clk', res)
	},
	success: function(res){
		console.log('success!', res)
	},
	error: function(){
		console.log('start error!')
	}
})

console.log(j('.cl1'))
// var a = {
// 	a: function(){ console.log('a')},
// 	b: function(args){ console.log('b',args)},
// }
// var command = j.fn.Command(a);
// command.execute('1')
// j('.cl1').bind('click', command.execute, '11');

// var defer = j.fn.Deferred();
//   defer.done(function() {
//     console.log('成功')
//   })
//   // 开始执行一段代码
//   setTimeout(function() {
//     defer.resolve(); // 改变deferred对象的执行状态
//   }, 2000);

// console.log($('#div1'));

// j.fn.function
// function fn(a) { console.log('fn', a); };
// function fn1(a, b) { console.log('fn1', a, b); };

// var a = fn; 
// var b = j.fn.function.after.call(a, fn1, 'a', 'b'); 
// b(0);

// j.fn.data()
// console.log(j('#div1').data('js'))


</script>
</html>